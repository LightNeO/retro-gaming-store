{% extends 'base.html' %}
{% block content %}
<div class="retro-banner">
    <h1 style="color:#ff79c6;">ðŸŽ® Welcome to Retro Gaming Store</h1>
    <p style="color:#8be9fd;">Discover the golden age of gaming with our collection of classic consoles</p>
</div>

<div class="row">
    <div class="col-12">
        <h2 style="color:#ff79c6;">Featured Consoles</h2>
        <div id="featured-products" class="row">
            <p class="text-center">Loading products...</p>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-md-4">
        <div class="card card-retro text-center p-4">
            <i class="fas fa-gamepad fa-3x mb-3" style="color:#50fa7b;"></i>
            <h4 style="color:#ff79c6;">Classic Consoles</h4>
            <p>From NES to PlayStation 2, we have the most iconic gaming systems</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card card-retro text-center p-4">
            <i class="fas fa-shipping-fast fa-3x mb-3" style="color:#50fa7b;"></i>
            <h4 style="color:#ff79c6;">Fast Shipping</h4>
            <p>Quick and secure delivery to your doorstep</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card card-retro text-center p-4">
            <i class="fas fa-shield-alt fa-3x mb-3" style="color:#50fa7b;"></i>
            <h4 style="color:#ff79c6;">Quality Guaranteed</h4>
            <p>All consoles tested and verified for optimal performance</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Load featured products
    fetch(`${CONFIG.API_BASE_URL}/products/?ordering=-rating&page_size=3`)
    .then(res => res.json())
    .then(data => {
        const container = document.getElementById('featured-products');
        
        // Handle paginated response
        const products = data.results || data;
        
        if (!products || products.length === 0) {
            container.innerHTML = '<p class="text-center text-muted">No products available</p>';
            return;
        }
        
        container.innerHTML = products.map(product => `
            <div class="col-md-4 mb-4">
                <div class="card product-card h-100">
                    <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 200px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title" style="color:#8be9fd;">${product.name}</h5>
                        <p class="card-text text-muted">${product.brand} â€¢ ${product.platform}</p>
                        <p class="card-text"><strong>Release Year:</strong> ${product.release_year}</p>
                        <p class="card-text"><strong>Price:</strong> <span style="color:#50fa7b; font-size: 1.2em;">$${product.price}</span></p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="stars">
                                ${'â˜…'.repeat(Math.round(product.rating || 0))}${'â˜†'.repeat(5 - Math.round(product.rating || 0))}
                                <small class="text-muted ms-1">${(product.rating || 0).toFixed(1)}/5</small>
                            </div>
                            <a href="/product/?id=${product.id}" class="btn btn-pixel" data-qa="view-product-btn">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    })
    .catch(error => {
        console.error('Error loading featured products:', error);
        document.getElementById('featured-products').innerHTML = '<p class="text-center text-danger">Error loading products. Please check your backend connection.</p>';
    });
</script>
{% endblock %} 